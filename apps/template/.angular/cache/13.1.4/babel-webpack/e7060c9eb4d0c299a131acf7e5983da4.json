{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar async_1 = require(\"../scheduler/async\");\n\nvar isDate_1 = require(\"../util/isDate\");\n\nvar Subscriber_1 = require(\"../Subscriber\");\n\nvar Notification_1 = require(\"../Notification\");\n\nfunction delay(delay, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async_1.async;\n  }\n\n  var absoluteDelay = isDate_1.isDate(delay);\n  var delayFor = absoluteDelay ? +delay - scheduler.now() : Math.abs(delay);\n  return function (source) {\n    return source.lift(new DelayOperator(delayFor, scheduler));\n  };\n}\n\nexports.delay = delay;\n\nvar DelayOperator = function () {\n  function DelayOperator(delay, scheduler) {\n    this.delay = delay;\n    this.scheduler = scheduler;\n  }\n\n  DelayOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new DelaySubscriber(subscriber, this.delay, this.scheduler));\n  };\n\n  return DelayOperator;\n}();\n\nvar DelaySubscriber = function (_super) {\n  __extends(DelaySubscriber, _super);\n\n  function DelaySubscriber(destination, delay, scheduler) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.delay = delay;\n    _this.scheduler = scheduler;\n    _this.queue = [];\n    _this.active = false;\n    _this.errored = false;\n    return _this;\n  }\n\n  DelaySubscriber.dispatch = function (state) {\n    var source = state.source;\n    var queue = source.queue;\n    var scheduler = state.scheduler;\n    var destination = state.destination;\n\n    while (queue.length > 0 && queue[0].time - scheduler.now() <= 0) {\n      queue.shift().notification.observe(destination);\n    }\n\n    if (queue.length > 0) {\n      var delay_1 = Math.max(0, queue[0].time - scheduler.now());\n      this.schedule(state, delay_1);\n    } else {\n      this.unsubscribe();\n      source.active = false;\n    }\n  };\n\n  DelaySubscriber.prototype._schedule = function (scheduler) {\n    this.active = true;\n    var destination = this.destination;\n    destination.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n      source: this,\n      destination: this.destination,\n      scheduler: scheduler\n    }));\n  };\n\n  DelaySubscriber.prototype.scheduleNotification = function (notification) {\n    if (this.errored === true) {\n      return;\n    }\n\n    var scheduler = this.scheduler;\n    var message = new DelayMessage(scheduler.now() + this.delay, notification);\n    this.queue.push(message);\n\n    if (this.active === false) {\n      this._schedule(scheduler);\n    }\n  };\n\n  DelaySubscriber.prototype._next = function (value) {\n    this.scheduleNotification(Notification_1.Notification.createNext(value));\n  };\n\n  DelaySubscriber.prototype._error = function (err) {\n    this.errored = true;\n    this.queue = [];\n    this.destination.error(err);\n    this.unsubscribe();\n  };\n\n  DelaySubscriber.prototype._complete = function () {\n    this.scheduleNotification(Notification_1.Notification.createComplete());\n    this.unsubscribe();\n  };\n\n  return DelaySubscriber;\n}(Subscriber_1.Subscriber);\n\nvar DelayMessage = function () {\n  function DelayMessage(time, notification) {\n    this.time = time;\n    this.notification = notification;\n  }\n\n  return DelayMessage;\n}();","map":{"version":3,"sources":["/home/turtuvshin/Learn/grocery/node_modules/rxjs/internal/operators/delay.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","value","async_1","require","isDate_1","Subscriber_1","Notification_1","delay","scheduler","async","absoluteDelay","isDate","delayFor","now","Math","abs","source","lift","DelayOperator","call","subscriber","subscribe","DelaySubscriber","_super","destination","_this","queue","active","errored","dispatch","state","length","time","shift","notification","observe","delay_1","max","schedule","unsubscribe","_schedule","add","scheduleNotification","message","DelayMessage","push","_next","Notification","createNext","_error","err","error","_complete","createComplete","Subscriber"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar async_1 = require(\"../scheduler/async\");\nvar isDate_1 = require(\"../util/isDate\");\nvar Subscriber_1 = require(\"../Subscriber\");\nvar Notification_1 = require(\"../Notification\");\nfunction delay(delay, scheduler) {\n    if (scheduler === void 0) { scheduler = async_1.async; }\n    var absoluteDelay = isDate_1.isDate(delay);\n    var delayFor = absoluteDelay ? (+delay - scheduler.now()) : Math.abs(delay);\n    return function (source) { return source.lift(new DelayOperator(delayFor, scheduler)); };\n}\nexports.delay = delay;\nvar DelayOperator = (function () {\n    function DelayOperator(delay, scheduler) {\n        this.delay = delay;\n        this.scheduler = scheduler;\n    }\n    DelayOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DelaySubscriber(subscriber, this.delay, this.scheduler));\n    };\n    return DelayOperator;\n}());\nvar DelaySubscriber = (function (_super) {\n    __extends(DelaySubscriber, _super);\n    function DelaySubscriber(destination, delay, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.delay = delay;\n        _this.scheduler = scheduler;\n        _this.queue = [];\n        _this.active = false;\n        _this.errored = false;\n        return _this;\n    }\n    DelaySubscriber.dispatch = function (state) {\n        var source = state.source;\n        var queue = source.queue;\n        var scheduler = state.scheduler;\n        var destination = state.destination;\n        while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {\n            queue.shift().notification.observe(destination);\n        }\n        if (queue.length > 0) {\n            var delay_1 = Math.max(0, queue[0].time - scheduler.now());\n            this.schedule(state, delay_1);\n        }\n        else {\n            this.unsubscribe();\n            source.active = false;\n        }\n    };\n    DelaySubscriber.prototype._schedule = function (scheduler) {\n        this.active = true;\n        var destination = this.destination;\n        destination.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n            source: this, destination: this.destination, scheduler: scheduler\n        }));\n    };\n    DelaySubscriber.prototype.scheduleNotification = function (notification) {\n        if (this.errored === true) {\n            return;\n        }\n        var scheduler = this.scheduler;\n        var message = new DelayMessage(scheduler.now() + this.delay, notification);\n        this.queue.push(message);\n        if (this.active === false) {\n            this._schedule(scheduler);\n        }\n    };\n    DelaySubscriber.prototype._next = function (value) {\n        this.scheduleNotification(Notification_1.Notification.createNext(value));\n    };\n    DelaySubscriber.prototype._error = function (err) {\n        this.errored = true;\n        this.queue = [];\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    DelaySubscriber.prototype._complete = function () {\n        this.scheduleNotification(Notification_1.Notification.createComplete());\n        this.unsubscribe();\n    };\n    return DelaySubscriber;\n}(Subscriber_1.Subscriber));\nvar DelayMessage = (function () {\n    function DelayMessage(time, notification) {\n        this.time = time;\n        this.notification = notification;\n    }\n    return DelayMessage;\n}());\n"]},"metadata":{},"sourceType":"script"}